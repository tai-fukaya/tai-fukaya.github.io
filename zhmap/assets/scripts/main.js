!function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var n=i(1),a=(r(n),i(2)),o=r(a);!function(e){function t(){l.animate(),requestAnimationFrame(t)}var i=e("#search_id"),r=e("#ministry"),n=e("#province"),a=e("#city"),s=e("#town"),l=new o["default"](window.innerWidth,window.innerHeight,e);e("body").append(l.renderer.domElement),t(),i.on("keyup",function(e){var t=l.visualizer.search(i.val()),o=t.place||{};r.text(o.ministry||""),n.text(o.province||""),a.text(o.city||""),s.text(o.town||"")}).focus(),e(window).on("resize",function(e){l.resize(window.innerWidth,window.innerHeight)})}(jQuery)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={width:800,height:600,jsonurl:["./assets/data/success.json"]},e.exports=t["default"]},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=i(3),s=r(o),l=function(){function e(t,i,r){n(this,e),this.width=t,this.height=i,this.cameraFov=60;var a=this.height/2*Math.sqrt(3);this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(0,0),this.renderer.domElement.style.position="fixed",this.renderer.domElement.style.top=0,this.renderer.domElement.style.left=0,this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(this.cameraFov,this.width/this.height,.1,1e3),this.camera.position.z=a,this.visualizer=new s["default"](t,i,r),this.scene.add(this.visualizer)}return a(e,[{key:"animate",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.camera.aspect=e/t,this.camera.position.z=t/2*Math.sqrt(3),this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t),this.visualizer.resize(e,t)}}]),e}();t["default"]=l,e.exports=t["default"]},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(1),u=r(l),c=function(e){function t(e,i,r){n(this,t);var o=a(this,Object.getPrototypeOf(t).call(this)),s=u["default"].jsonurl,l=0,c=o;o.data=[],o.width=e,o.height=i,s.forEach(function(e){r.getJSON(e,function(e){c.data=c.data.concat(e),++l===s.length&&(console.log(c.data.length),c.initializeGeometryColors(),c.calculateGeometryPositions())})});var h=new THREE.BufferGeometry,d=new THREE.PointsMaterial({size:2,blending:THREE.AdditiveBlending,vertexColors:THREE.VertexColors,opacity:.8,depthTest:!1,transparent:!0}),f=new THREE.Points(h,d);return f.position.x=-e/2,f.position.y=-i/2,f.visible=!1,o.particle=f,o.add(o.particle),o}return o(t,e),s(t,[{key:"initializeGeometryColors",value:function(){var e=new Float32Array(3*this.data.length);this.data.forEach(function(t,i){var r=3*i;e[r+0]=e[r+1]=e[r+2]=1}),this.particle.geometry.addAttribute("color",new THREE.BufferAttribute(e,3))}},{key:"calculateGeometryPositions",value:function(){var e=this,t=0,i=1e6,r=0,n=1e6;e.data.forEach(function(a,o){return 0===a.lat&&0===a.lng?void e.data.splice(o,1):(t<a.lat&&(t=a.lat),i>a.lat&&(i=a.lat),r<a.lng&&(r=a.lng),void(n>a.lng&&(n=a.lng)))}),t=2*((t+2)/2|0),i=2*((i-2)/2|0),r=2*((r+2)/2|0),n=2*((n-2)/2|0);var a=e.data.length,o=e.width/(r-n),s=e.height/(t-i),l=o;l>s&&(l=s);var u=(e.width-(r-n)*l)/2,c=(e.height-(t-i)*l)/2;console.log(e.width,u,e.height,c,o,s,l);var h=new Float32Array(3*a);e.data.forEach(function(e,t){var r=3*t;h[r+0]=u+(e.lng-n)*l,h[r+1]=c+(e.lat-i)*l,h[r+2]=0}),e.particle.geometry.addAttribute("position",new THREE.BufferAttribute(h,3)),e.particle.position.x=-e.width/2,e.particle.position.y=-e.height/2,e.particle.visible=!0}},{key:"search",value:function(e){var t={};if(!this.particle.visible)return t;var i=new Float32Array(3*this.data.length);return this.data.forEach(function(r,n){var a=3*n;e&&0===r.display_id.search(e)?(i[a+0]=0,i[a+1]=1,i[a+2]=1,r.search_id===e&&(t=r)):i[a+0]=i[a+1]=i[a+2]=1}),this.particle.geometry.addAttribute("color",new THREE.BufferAttribute(i,3)),t}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.calculateGeometryPositions()}}]),t}(THREE.Object3D);t["default"]=c,e.exports=t["default"]}]);